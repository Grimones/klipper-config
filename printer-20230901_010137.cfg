[gcode_macro _km_options]
variable_bed_surfaces: []
variable_menu_temperature: [
  {'name' : 'PLA',  'extruder' : 210, 'bed' : 55},
  {'name' : 'PETG', 'extruder' : 230, 'bed' : 80}]
variable_start_purge_length: 20.0
variable_start_bed_heat_overshoot: 5.0
variable_start_extruder_preheat_scale: 0.6
variable_start_extruder_probing_temp: 150
gcode: # This line is required by Klipper.

[include wled.cfg]
[include ExcludeObject.cfg]
[include KAMP_Settings.cfg]
[include klipper-macros/*.cfg]
[include macros/GET_PROBE_LIMITS.cfg]

# <---------------------- Klipper macros ---------------------->
[idle_timeout]
gcode:
  _KM_IDLE_TIMEOUT

[pause_resume]

[respond]

[save_variables]
filename: ~/printer_data/variables.cfg

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[display_status]
# <----------------------------------------------------------->

[include OrbiterSensor.cfg]

[include generic-bigtreetech-manta-m8p-V1_1.cfg]

# Nozzel X4 Y-3.5

[safe_z_home]
home_xy_position: 171.3, 129.9
z_hop: 5

[bed_mesh]
speed: 500
horizontal_move_z: 10
mesh_min: 15, 15
mesh_max: 184.2, 202.6
probe_count: 7, 7
mesh_pps: 5, 5
algorithm: bicubic
fade_start: 1
fade_end: 10
fade_target: 0

[screws_tilt_adjust]
screw1_name: rear left screw
screw1: 86.3, 214.9

screw2_name: front left screw
screw2: 86.3, 44.9

screw3_name: rear right screw
screw3: 238, 214.9

screw4_name: front right screw
screw4: 238, 44.9

horizontal_move_z: 10
speed: 50
screw_thread: CW-M4

[gcode_arcs]
resolution: 0.1

[adxl345]
cs_pin: PA6
spi_software_sclk_pin: PA7
spi_software_miso_pin: PA5
spi_software_mosi_pin: PC4


# x_offset: -53.8
# y_offset: -7.2
[resonance_tester]
accel_chip: adxl345
probe_points:
    117.5,122.7,20

[z_tilt]
z_positions: 
  0,117
  235,117
points:
  86.3, 129.9
  238, 129.9
speed: 100
horizontal_move_z: 15
retries: 10
retry_tolerance: 0.01

[axis_twist_compensation]
calibrate_start_x: 29
calibrate_end_x: 199
calibrate_y: 120.5

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 22.927
#*# pid_ki = 1.047
#*# pid_kd = 125.524
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 70.703
#*# pid_ki = 1.215
#*# pid_kd = 1028.725
#*#
#*# [input_shaper]
#*# shaper_type_y = mzv
#*# shaper_freq_y = 41.4
#*# shaper_type_x = zv
#*# shaper_freq_x = 57.6
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.003670, 0.016170, 0.021170, -0.041955
#*# 	0.021170, 0.056795, 0.057420, -0.013205
#*# 	0.011795, 0.063670, 0.061795, -0.022580
#*# x_count = 4
#*# y_count = 3
#*# mesh_x_pps = 5
#*# mesh_y_pps = 5
#*# algo = lagrange
#*# tension = 0.2
#*# min_x = 37.31999999999999
#*# max_x = 202.68
#*# min_y = 82.32
#*# max_y = 147.68
#*#
#*# [bed_mesh no axis compensation no tilt]
#*# version = 1
#*# points =
#*# 	-0.320625, -0.255625, -0.255625, -0.283750, -0.486250
#*# 	-0.244375, -0.104375, -0.083750, -0.064375, -0.338750
#*# 	-0.176875, -0.093125, -0.046250, -0.072500, -0.266875
#*# 	-0.150000, -0.059375, -0.002500, -0.010000, -0.316250
#*# 	-0.178125, -0.153750, -0.087500, -0.139375, -0.431875
#*# x_count = 5
#*# y_count = 5
#*# mesh_x_pps = 5
#*# mesh_y_pps = 5
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 5.0
#*# max_x = 225.0
#*# min_y = 5.0
#*# max_y = 185.0
#*#
#*# [bed_mesh axis compensation]
#*# version = 1
#*# points =
#*# 	-0.103472, -0.118647, -0.103401, -0.190385, -0.352569
#*# 	-0.085347, 0.015103, 0.051599, 0.003990, -0.231319
#*# 	-0.035972, 0.018228, 0.070349, -0.007885, -0.163819
#*# 	-0.017847, 0.048228, 0.116599, 0.031490, -0.226319
#*# 	-0.069722, -0.049897, 0.022224, -0.092885, -0.315069
#*# x_count = 5
#*# y_count = 5
#*# mesh_x_pps = 5
#*# mesh_y_pps = 5
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 5.0
#*# max_x = 225.0
#*# min_y = 5.0
#*# max_y = 185.0
#*#
#*# [bltouch]
#*# z_offset = 0.470
